<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        body{
            margin: 0px;
        }

        .inline {
            font-size: 2rem;
            padding: 1rem;
            display: inline;
        }

        .red{
            color: red;
        }

        .grid{
            /* display: flex; */
        }

        .grid>p{
            background-color: #efefef;
            margin: 1rem 1rem;
        }

        .screen{
            height: 100vh;
            display: flex;
            width: 100%;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>

<body>

    <div class="screen">
        <div id="grid" class="grid"></div>
    </div>

    <script>
        let show = document.getElementById('grid')
        let p1chance = true

        let grid = [[-1, -1, -1], [-1, -1, -1], [-1, -1, -1]]
        for (var i = 0; i < 3; i++) {
            for (var j = 0; j < 3; j++) {
                let p = document.createElement('p')
                let span = document.createElement('span')
                p.setAttribute('class', 'inline')
                span.setAttribute('onclick', 'update(this.id)')
                span.innerHTML = grid[i][j]
                span.setAttribute('class', 'material-symbols-outlined')
                span.setAttribute('id', (i * 3) + j)
                p.appendChild(span)
                show.appendChild(p)
            }
            show.innerHTML += '<br>'
        }

        function update(e) {
            console.log(e)
            let t = document.getElementById(e)
            if (p1chance) {
                t.innerHTML = 'circle'
                grid[Math.floor(e / 3)][e % 3] = 1
                p1chance = false
            }
            else {
                t.innerHTML = 'close'
                grid[Math.floor(e / 3)][e % 3] = 2
                p1chance = true
            }
            t.removeAttribute('onclick')
            
            result(check())
        }


        function check() {
            let rowcheck
            let columncheck
            let leftdiagonal = grid[0][0]
            let rightdiagonal = grid[0][2]


            for (var i = 0; i < 3; i++) {
                rowcheck = grid[i][0]
                columncheck = grid[0][i]
                for (var j = 0; j < 3; j++) {
                    if (grid[i][j] != rowcheck) {
                        rowcheck = -1
                    }
                    if (grid[j][i] != columncheck) {
                        columncheck = -1
                    }
                    if (i == j) {
                        if (grid[i][j] != leftdiagonal) {
                            leftdiagonal = -1
                        }
                    }
                    if (i + j == 2) {
                        if (grid[i][j] != rightdiagonal) {
                            rightdiagonal = -1
                        }
                    }
                }
                if (rowcheck > -1) {
                    return 'r' + i
                }
                else if (columncheck > -1) {
                    return 'c' + i
                }
            }

            if (leftdiagonal > -1) {
                return 'dl'
            }
            else if (rightdiagonal > -1) {
                return 'dr'
            }
            else{
                return 'none'
            }
        }


        function display() {
            console.log('original grid')
            for (var i = 0; i < 3; i++) {
                for (var j = 0; j < 3; j++) {
                    console.log(grid[i][j])
                }
            }
        }

        function result(a){
            if(a.charAt(0)=='r'){
                for(var i=0;i<3;i++){
                    document.getElementById(parseInt(a.charAt(1))*3+i).classList.add('red')
                }
            }
            else if(a.charAt(0)=='c'){
                for(var i=parseInt(a.charAt(1));i<9;i+=3){
                    document.getElementById(i).classList.add('red')
                }
            }
            else if(a=='dl'){
                for(var i=0;i   <9;i+=4){
                    document.getElementById(i).classList.add('red')
                }
            }
            else if(a=='dr'){
                for(var i=2;i<8;i+=2){
                    document.getElementById(i).classList.add('red')
                }
            }
        }

    </script>
</body>

</html>